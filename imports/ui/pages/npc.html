<template name="npc">
  {{npc.name}}
  <img src="/images/{{image}}.png"/>
  {{#if dialog.text}}
    <div>
      {{dialog.text}}
    </div>
    <ul class="response-options">
      {{#each option in dialog.options}}
        <li class="response-option" data-option="{{encode option}}">{{option.option}}</li>
      {{/each}}
    </ul>
  {{/if}}
  {{#if dialog.trade}}
    <div>
      <div><img src="/images/money.png"/> {{npc.stats.money}}</div>
      <div class="tab-container">
        <div class="tab" data-tab="items">Items</div>
        <div class="tab" data-tab="resources">Resources</div>
      </div>
      <div class="tab-displays">
        {{#if tab 'items'}}
          {{#each item in items}}
          {{/each}}
        {{/if}}
        {{#if tab 'resources'}}
          {{#each resource in resources}}
            <div class="trade-resource" data-resource="{{resource.key}}">{{resource.label}}: {{resource.amount}} @ ${{resource.cost}} / lb</div>
            {{#if tradeResource resource.key}}
              <div>
                <select class="resource-trade-type">
                  <option value="buy">Buy</option>
                  <option value="sell">Sell</option>
                </select>
                <input class="resource-trade-amount" type="number" min="0" value="1"/>
              </div>
            {{/if}}
          {{/each}}
        {{/if}}
      </div>
    </div>
    <ul class="response-options">
      <li class="response-option" data-option='{"action":"trade"}'>TRADE</li>
      <li class="response-option" data-option='{"action":"cancel"}'>CANCEL</li>
    </ul>
  {{/if}}
</template>
