<template name="team">
  <div class="team-page">
    <div class="scoreboard-container">
      <div class="scoreboard">
        <div class="{{team.key}}">
          <div class="team-name">{{team.name}}</div>
          <div class="team-score">{{team.score}}</div>
        </div>
        <div class="{{otherTeam.key}}">
          <div class="team-score">{{otherTeam.score}}</div>
          <div class="team-name">{{otherTeam.name}}</div>
        </div>
        <div class="time-left">
          {{timeLeft}}
        </div>
      </div>
    </div>
    <h1>{{team.name}}</h1>
    <div class="tab-links">
      <div class="inner-tab-links-container">
        <a href="#" class="team-tab {{tab 'summary'}}" data-tab="summary">Summary</a> 
        <a href="#" class="team-tab {{tab 'ranks'}}" data-tab="ranks">Ranks</a> 
        <a href="#" class="team-tab {{tab 'missions'}}" data-tab="missions">Missions</a> 
        <a href="#" class="team-tab {{tab 'chat'}}" data-tab="chat">Chat</a> 
      </div>
    </div>
    {{#if tab 'summary'}}
      <ul class="team-status">
        <li>Online players: 40</li>
        <li>Team kills: {{team.kills}}</li>
        <li>Team deaths: 40</li>
      </ul>
    {{/if}}

    {{#if tab 'ranks'}}
      <div class="rank-container">

        <div class="rank-display">
          <div class="rank-image-container">
            <img src="{{king.image}}"/>
          </div>
          <div class="rank-info-conatiner">
            <div class="rank-name">{{king.name}}</div>
            <div class="rank-holder">
              {{#if king.player}}
                <div class="player-name">{{king.player.name}}</div>
              {{else}}
                <div class="player-name">Your team has no {{king.name}}</div>
              {{/if}}
            </div>
            <div class="rank-score">Minimum rank points: {{king.power}}</div>
          </div>
        </div>

        <div class="rank-display">
          <div class="rank-image-container">
            <img src="{{freemen.image}}"/>
          </div>
          <div class="rank-info-conatiner">
            <div class="rank-name">{{freemen.name}}</div>
            <div class="rank-holder">
              {{#if freemen.players}}
                <div class="player-name">{{king.player.name}}</div>
              {{else}}
                <div class="player-name">Your team has no {{freemen.name}}s</div>
              {{/if}}
            </div>
            <div class="rank-score">Minimum rank points: {{freemen.power}}</div>
          </div>
          <div class="rank-name">{{freeman.name}}</div>
        </div>

        <div class="rank-display">
          <div class="rank-image-container">
            <img src="{{peasants.image}}"/>
          </div>
          <div class="rank-info-conatiner">
            <div class="rank-name">{{peasants.name}}</div>
            <div class="rank-holder">
              {{#if peasants.players}}
                <div class="player-name">There are {{peasants.players.count}} on your team</div>
              {{/if}}
            </div>
            {{#if rankIs 'peasant'}}
              <div class="rank-score">You are a peasant</div>
            {{/if}}
          </div>
          <div class="rank-name">{{freeman.name}}</div>
        </div>
      </div>
    {{/if}}

    {{#if tab 'missions'}}
      <div class="missions-container">
        <h2>Your Missions</h2>
        {{#each mission in myMissions}}
          <div class="mission">
            <div class="mission-type-icon-container">
              <i class="fa fa-{{mission.icon}}"></i>
            </div>
            <div class="mission-details-container">
              <div class="mission-title">{{mission.title}}</div>
              <div class="mission-description">{{mission.description}}</div>
            </div>
            <div class="mission-value">Rank Points Reward: {{mission.rankPoints}}</div>
            <div class="accepted-notice">
              Accepted
            </div>
          </div>
        {{else}}
          <p class="no-missions-message">You do not have not any active missions</p>
        {{/each}}
        <h2>Available Missions</h2>
        {{#each mission in missions}}
          <div class="mission">
            <div class="mission-type-icon-container">
              <i class="fa fa-{{mission.icon}}"></i>
            </div>
            <div class="mission-details-container">
              <div class="mission-title">{{mission.title}}</div>
              <div class="mission-description">{{mission.description}}</div>
            </div>
            <div class="mission-value">Cost to Accept: 100 energy</div>
            <div class="mission-value">Rank Points Reward: {{mission.rankPoints}}</div>
            <div>
              <button class="accept-mission" data-id="{{mission._id}}">Accept</button>
            </div>
          </div>
        {{/each}}
      </div>
    {{/if}}

    {{#if tab 'chat'}}
      {{> chat teamChat}}
    {{/if}}
  </div>
</template>
